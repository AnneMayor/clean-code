# 08. 경계

경계를 깔끔하게 처리하는 기법과 기교를 살펴본다

### 외부 코드 사용하기

- 인터페이스 제공자는 더 많은 고객을 위해 적용성을 최대한 넓히려 애쓴다. 반면, 사용자는 자신의 요구에 집중하는 인터페이스를 바란다.
- Map 사용시 Generics 을 사용하면 코드 가독성이 높아진다.
    
    ```jsx
    Map<String, Sensor> sensors = new HashMap<Sensor>();
    ...
    Sensor s = sensros.get(sensorId);
    ```
    
- 프로그램에서 Map<String, Sensor> 인스턴스를 여기저기로 넘긴다면, Map 인터페이스가 변할 경우, 수정할 코드가 상당히 많아진다.
- 경계인터페이스인 Map을 Sensors 안으로 숨긴다. Map 인터페이스가 변하더라도 나머지 프로그램에는 영향을 미치지 않게 된다.
    
    ```jsx
    public class Sensors {
    	private Map sensors = new HashMap();
    
    	public Sensor getById(String id){
    		return (Sensor) sensors.get(id);
    	}
    	...
    }
    ```
    
    - Map 클래스를 사용할때마다 위와 같이 캡슐화 하라는 소리가 아니다. Map을 여기저기 넘기지 말라는 말이다.
    - Map 인스턴스를 공개 API의 인수로 넘기거나 반환값으로 사용하지 않는다.

### 경계 살피고 익히기

- 외부 코드를 사용하면 적은 시간에 더 많은 기능을 출시하기 쉬워진다.
- 학습 테스트 : 외부 코드를 익히기 위해 외부 코드를 호출하는 대신 먼저 간단하 테스트 케이스를 작성해 외부코드를 익히면 어떨까?

### 학습 테스트는 공짜 이상이다.

- 실제 코드와 동일한 방식으로 인터페이스를 사용하는 테스트 케이스가 필요하다. 이런 경계 테스트가 있다면 패키지의 새 버전으로 이전하기 쉬워진다. 그렇지 않다면 낡은 버전을 필요 이상으로 오랫동안 사용하려는 유혹에 빠지기 쉽다.

### 아직 존재하지 않는 코드를 사용하기

- 아는 코드와 모르는 코드를 분리하는 경계다.
- 우리가 바라는 인터페이스를 구현하면 우리가 인터페이스를 전적으로 통제한다는 장점이 생긴다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e91eeb73-0e23-4d07-9054-9e2e490f9402/Untitled.png)

### 깨끗한 경계

- 경계에서는 흥미로운 일이 많이 벌어진다. 변경이 대표적인 예다.
- 경계에 위치하는 코드는 깔끔히 분리한다.
- 외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리하자.
